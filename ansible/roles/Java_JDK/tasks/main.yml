- name: Update apt cache
  become: true
  apt:
    update_cache: yes

- name: Install OpenJDK 11
  become: true
  apt:
    name: openjdk-11-jdk
    state: present

- name: Create Jenkins user
  become: true
  user:
    name: jenkins
    shell: /bin/bash
    create_home: yes

- name: Set Jenkins U_P
  become: true
  ansible.builtin.shell: echo "jenkins:jenkins" | chpasswd

- name: Add Jenkins to 'ubuntu' group
  become: true
  ansible.builtin.command: usermod -a -G ubuntu jenkins

- name: Add Jenkins to 'docker' group
  become: true
  ansible.builtin.command: usermod -aG docker jenkins

- name: Add ubuntu to 'docker' group
  become: true
  ansible.builtin.command: usermod -aG docker ubuntu

- name: Check Java version
  become: true
  command: java --version
  register: java_version

- debug:
    var: java_version.stdout_lines
